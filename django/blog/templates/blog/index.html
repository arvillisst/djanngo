{% extends "base.html" %}
{% load static %}
{% load thumbnail %}
{% load humanize %}

{% block title %}DJANGO-Blog{% endblock title %}

{% block content %}
<div class="page-wrapper">
    {% include "_parts/header.html" %}
	<!-- Offers Section -->
	<section class="offers-section">
		<div class="auto-container">
			<div class="masonry-items-container row clearfix">
				{% for post in first_four_posts %}
				{% if forloop.counter == 1 %}
					<!-- Projects Block  370x480 740X960 -->
					<div class="projects-block masonry-item col-lg-4 col-md-6 col-sm-12">
						<div class="inner-box">
							<div class="image">
								{% comment %} <img src="{% static 'images/gallery/1.jpg' %}" alt=""/> {% endcomment %}
								{% thumbnail post.image "740x960" crop="center" as im %}
									<img src="{{ im.url  }}" width="{{ im.width }}" height="{{ im.height }}">
								{% endthumbnail %}
								<div class="overlay-box">
									<div class="overlay-inner">
										<div class="content">
											<a href="{{ post.category.get_absolute_url }}" class="category">{{ post.category.name }}</a>
											<h3><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
											<div class="text">{{ post.content|safe|truncatewords_html:30}}</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				{% elif forloop.counter == 2 %}
					<!-- Projects Block  740x456 -->
					<div class="projects-block masonry-item col-lg-4 col-md-6 col-sm-12">
						<div class="inner-box">
							<div class="image">
								{% comment %} <img src="{% static 'images/gallery/2.jpg' %}" alt="" /> {% endcomment %}
								{% thumbnail post.image "740x456" crop="center" as im %}
									<img src="{{ im.url  }}" width="{{ im.width }}" height="{{ im.height }}">
								{% endthumbnail %}
								<div class="overlay-box">
									<div class="overlay-inner">
										<div class="content">
											<a href="{{ post.category.get_absolute_url }}" class="category">{{ post.category.name }}</a>
											<h3><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
											
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				{% elif forloop.counter == 3 %}
					<!-- Projects Block -->
					<div class="projects-block masonry-item col-lg-4 col-md-6 col-sm-12">
						<div class="inner-box">
							<div class="image">
								{% thumbnail post.image "740x960" crop="center" as im %}
									<img src="{{ im.url  }}" width="{{ im.width }}" height="{{ im.height }}">
								{% endthumbnail %}
								<div class="overlay-box">
									<div class="overlay-inner">
										<div class="content">
											<a href="{{ post.category.get_absolute_url }}" class="category">{{ post.category.name }}</a>
											<h3><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
											<div class="text">{{ post.content|safe|truncatewords_html:35}}</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

				{% elif forloop.counter == 4 %}
					<!-- Projects Block -->
					<div class="projects-block masonry-item col-lg-4 col-md-6 col-sm-12">
						<div class="inner-box">
							<div class="image">
								{% thumbnail post.image "740x456" crop="center" as im %}
									<img src="{{ im.url  }}" width="{{ im.width }}" height="{{ im.height }}">
								{% endthumbnail %}
								<div class="overlay-box">
									<div class="overlay-inner">
										<div class="content">
											<a href="{{ post.category.get_absolute_url }}" class="category">{{ post.category.name }}</a>
											<h3><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

				{% endif %}
				{% endfor %}

			</div>
		</div>
	</section>
	<!-- End Offers Section -->

	<!-- Sidebar Page Container -->
    <div class="sidebar-page-container">
    	<div class="auto-container">
        	<div class="sticky-container row clearfix">
				<!--Content Side-->
                <div class="content-side col-lg-8 col-md-12 col-sm-12">
					<div class="blog-list">

						{% for post in last_posts %}
							<!-- News Style Three -->
						<div class="news-block-three">
							<div class="inner-box">
								<div class="row clearfix">
									<!-- Image Column 303x182 568x340  -->
									<div class="image-column col-lg-5 col-md-5 col-sm-12">
										<div class="inner-column">
											<div class="image">
												{% comment %} <div class="date-box">13 <br> Feb</div> {% endcomment %}
												<div class="date-box">{{ post.publish|naturalday }}</div>
												{% comment %} <a href="{{ post.get_absolute_url }}"><img src="{{ post.image.url }}" alt="" /></a> {% endcomment %}
												{% thumbnail post.image "568x340" crop="center" as im %}
													<a href="{{ post.get_absolute_url }}"><img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}"></a>
													
												{% endthumbnail %}
											</div>
										</div>
									</div>

									<!-- Content Column -->
									<div class="content-column col-lg-7 col-md-7 col-sm-12">
										<div class="inner-column">
											<div class="upper-box">
												<h4><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h4>
												<ul class="post-meta">
													<li><a><span class="icon fa fa-user"></span> Admin</a></li>
													<li><a><span class="icon fa fa-eye"></span> {{ post.hit_count.hits }}</a></li>
													{% comment %} <li><span class="icon far fa-heart"></span> {{ post.likes }}</li>
													<li><span class="icon far fa-heart"></span> {{ post.dislikes }}</li> {% endcomment %}
													<li><a><span class="icon fas fa-comment-dots"></span> {{ post.comments.count }}</a></li>
												</ul>
												<div class="separator"></div>
											</div>
											<div class="lower-box">
											{% if post.title|wordcount > 12 %}
												<div class="text">{{ post.content|safe|truncatewords_html:20}}</div>
											{% comment %} {% elif post.title|wordcount <= 12 %}
												<div class="text">{{ post.content|safe|truncatewords_html:23}}</div> {% endcomment %}
											{% elif post.title|wordcount < 8 %}
												<div class="text">{{ post.content|safe|truncatewords_html:27}}</div> 
											{% elif post.title|wordcount == 8 %}
												<div class="text">{{ post.content|safe|truncatewords_html:23}}</div> 
											{% elif post.title|wordcount >= 10 %}
												<div class="text">{{ post.content|safe|truncatewords_html:20}}</div> 
											{% elif post.title|wordcount >= 9 %}
												<div class="text">{{ post.content|safe|truncatewords_html:20}}</div>
											{% endif %}
											</div>
										</div>
									</div>

								</div>
							</div>
						</div>
						{% endfor %}

						<!-- Styled Pagination -->
						{% if last_posts.has_other_pages %}
						<div class="styled-pagination text-center">
							<ul class="inner-container clearfix">
							{% if last_posts.has_previous %}
								<li class="prev"><a href="?page={{ last_posts.previous_page_number }}" class="active"><i class="flaticon-left-arrow"></i>  Пред </a></li>
							{% endif %}
							{% for i in last_posts.paginator.page_range %}
                                {% if last_posts.number > 4 and forloop.first %}
                                    <li class="page-item disabled">...</li>
                                {% endif %}
								{% if last_posts.number == i %}
									<li class="active"><a href="#">{{ i }}</a></li>
								{% elif i > last_posts.number|add:'-4' and i < last_posts.number|add:'4' %}
                                    <li><a href="?page={{ i }}">{{ i }}</a></li>
{#								{% else %}#}
{#									<li><a href="?page={{ i }}">{{ i }}</a></li>#}
								{% endif %}
							{% endfor %}
							{% if last_posts.has_next %}
								<li class="next"><a href="?page={{ last_posts.next_page_number }}" class="active">След <i class="flaticon-right-arrow-1"></i></a></li>
							{% endif %}
							</ul>
						</div>
						{% endif %}
						<!-- End Styled Pagination -->
					</div>
				</div>

				<!--Sidebar Side-->
                <div class="sidebar-side col-lg-4 col-md-12 col-sm-12">
                	{% include "_parts/sidebar.html" %}
				</div>

			</div>
		</div>
	</div>
	<!-- End Sidebar Page Container -->
	
	<!--Main Footer-->
    {% include "_parts/footer.html" %}
</div>  
<!--End pagewrapper-->
<!--Scroll to top-->
<div class="scroll-to-top scroll-to-target" data-target="html"><span class="fa fa-angle-up"></span></div>
<!--Search Popup-->
{% include '_parts/search.html' %}
	
{% endblock content %}